(self["webpackChunkodin_battleship"] = self["webpackChunkodin_battleship"] || []).push([["gameLogic"],{

/***/ "./src/gameLogic.js":
/*!**************************!*\
  !*** ./src/gameLogic.js ***!
  \**************************/
/***/ ((module) => {

const Ship = len => {
  const length = len;
  let hits = 0;
  const hit = () => {
    hits++;
  };
  const isSunk = () => {
    return hits === length;
  };
  return {
    length,
    hit,
    isSunk
  };
};
const Gameboard = () => {
  const board = [];
  for (let i = 0; i < 10; i++) {
    board.push([]);
    for (let j = 0; j < 10; j++) {
      board[i].push({
        shipSpace: false,
        shipPointer: null,
        shotAt: false
      });
    }
  }
  const placeShip = (ship, x, y, direction) => {
    if (direction === "horizontal") {
      if (x < 0 || x > 9 || y < 0 || y > 9) {
        return false;
      }
      if (x + ship.length > 10) {
        return false;
      }
      for (let i = 0; i < ship.length; i++) {
        if (board[x + i][y].shipSpace) {
          return false;
        }
      }
      for (let i = 0; i < ship.length; i++) {
        board[x + i][y].shipSpace = true;
        board[x + i][y].shipPointer = ship;
      }
    } else if (direction === "vertical") {
      if (x < 0 || x > 9 || y < 0 || y > 9) {
        return false;
      }
      if (y + ship.length > 10) {
        return false;
      }
      for (let i = 0; i < ship.length; i++) {
        if (board[x][y + i].shipSpace) {
          return false;
        }
      }
      for (let i = 0; i < ship.length; i++) {
        board[x][y + i].shipSpace = true;
        board[x][y + i].shipPointer = ship;
      }
    }
  };
  const receiveAttack = (x, y) => {
    if (x < 0 || x > 9 || y < 0 || y > 9) {
      return false;
    }
    if (board[x][y].shotAt) {
      return false;
    }
    board[x][y].shotAt = true;
    if (board[x][y].shipSpace) {
      board[x][y].shipPointer.hit();
    }
  };
  const allSunk = () => {
    for (let i = 0; i < board.length; i++) {
      for (let j = 0; j < board[i].length; j++) {
        if (board[i][j].shipSpace && board[i][j].shipPointer.isSunk() === false) {
          return false;
        } else {
          continue;
        }
      }
    }
    return true;
  };
  return {
    board,
    placeShip,
    receiveAttack,
    allSunk
  };
};
const Player = () => {
  const name = "Player";
  const board = Gameboard();
  const ships = [Ship(5), Ship(4), Ship(3), Ship(3), Ship(2)];
  const getRandomCoordinates = () => {
    const x = Math.floor(Math.random() * 10);
    const y = Math.floor(Math.random() * 10);
    return [x, y];
  };
  const getRandomDirection = () => {
    const directions = ["horizontal", "vertical"];
    const direction = directions[Math.floor(Math.random() * 2)];
    return direction;
  };
  const randomPlaceShips = () => {
    for (let i = 0; i < ships.length; i++) {
      let coordinates = getRandomCoordinates();
      let x = coordinates[0];
      let y = coordinates[1];
      let direction = getRandomDirection();
      if (board.placeShip(ships[i], x, y, direction) === false) {
        i--;
      }
    }
  };
  return {
    name,
    board,
    ships,
    randomPlaceShips,
    getRandomCoordinates
  };
};
const Computer = () => {
  const name = "Computer";
  const board = Gameboard();
  const ships = [Ship(5), Ship(4), Ship(3), Ship(3), Ship(2)];
  const getRandomCoordinates = () => {
    const x = Math.floor(Math.random() * 10);
    const y = Math.floor(Math.random() * 10);
    return [x, y];
  };
  const getRandomDirection = () => {
    const directions = ["horizontal", "vertical"];
    const direction = directions[Math.floor(Math.random() * 2)];
    return direction;
  };
  const randomPlaceShips = () => {
    for (let i = 0; i < ships.length; i++) {
      let coordinates = getRandomCoordinates();
      let x = coordinates[0];
      let y = coordinates[1];
      let direction = getRandomDirection();
      if (board.placeShip(ships[i], x, y, direction) === false) {
        i--;
      }
    }
  };
  return {
    name,
    board,
    ships,
    randomPlaceShips,
    getRandomCoordinates
  };
};
const GameController = () => {
  const player = Player();
  player.randomPlaceShips();
  const computer = Computer();
  computer.randomPlaceShips();
  let turncounter = 0;
  while (player.board.allSunk() === false && computer.board.allSunk() === false) {
    console.log("Turn " + turncounter);
    if (turncounter % 2 === 0) {
      let coordinates = computer.getRandomCoordinates();
      let x = coordinates[0];
      let y = coordinates[1];
      if (player.board.receiveAttack(x, y) === false) {
        turncounter--;
      }
    } else {
      let coordinates = player.getRandomCoordinates();
      let x = coordinates[0];
      let y = coordinates[1];
      if (computer.board.receiveAttack(x, y) === false) {
        turncounter--;
      }
    }
    turncounter++;
  }
  if (player.board.allSunk()) {
    console.log("Computer wins in " + turncounter + " turns!");
  } else {
    console.log("Player wins in " + turncounter + " turns");
  }
};
module.exports = {
  Ship,
  Gameboard,
  Player,
  Computer,
  GameController
};

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ var __webpack_exports__ = (__webpack_exec__("./src/gameLogic.js"));
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsQ0FBQztNQUMvQyxJQUFJUixDQUFDLEdBQUdlLFdBQVcsQ0FBQyxDQUFDLENBQUM7TUFDdEIsSUFBSWQsQ0FBQyxHQUFHYyxXQUFXLENBQUMsQ0FBQyxDQUFDO01BQ3RCLElBQUlJLFFBQVEsQ0FBQzVCLEtBQUssQ0FBQ1ksYUFBYSxDQUFDSCxDQUFDLEVBQUVDLENBQUMsQ0FBQyxLQUFLLEtBQUssRUFBRTtRQUNoRG1CLFdBQVcsRUFBRTtNQUNmO0lBQ0Y7SUFDQUEsV0FBVyxFQUFFO0VBQ2Y7RUFDQSxJQUFJRixNQUFNLENBQUMzQixLQUFLLENBQUNhLE9BQU8sQ0FBQyxDQUFDLEVBQUU7SUFDMUJpQixPQUFPLENBQUNDLEdBQUcsQ0FBQyxtQkFBbUIsR0FBR0YsV0FBVyxHQUFHLFNBQVMsQ0FBQztFQUM1RCxDQUFDLE1BQU07SUFDTEMsT0FBTyxDQUFDQyxHQUFHLENBQUMsaUJBQWlCLEdBQUdGLFdBQVcsR0FBRyxRQUFRLENBQUM7RUFDekQ7QUFDRixDQUFDO0FBRURHLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQUV4QyxJQUFJO0VBQUVNLFNBQVM7RUFBRWUsTUFBTTtFQUFFVyxRQUFRO0VBQUVDO0FBQWUsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9nYW1lTG9naWMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgU2hpcCA9IChsZW4pID0+IHtcbiAgY29uc3QgbGVuZ3RoID0gbGVuO1xuICBsZXQgaGl0cyA9IDA7XG4gIGNvbnN0IGhpdCA9ICgpID0+IHtcbiAgICBoaXRzKys7XG4gIH07XG4gIGNvbnN0IGlzU3VuayA9ICgpID0+IHtcbiAgICByZXR1cm4gaGl0cyA9PT0gbGVuZ3RoO1xuICB9O1xuICByZXR1cm4geyBsZW5ndGgsIGhpdCwgaXNTdW5rIH07XG59O1xuXG5jb25zdCBHYW1lYm9hcmQgPSAoKSA9PiB7XG4gIGNvbnN0IGJvYXJkID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgIGJvYXJkLnB1c2goW10pO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgYm9hcmRbaV0ucHVzaCh7XG4gICAgICAgIHNoaXBTcGFjZTogZmFsc2UsXG4gICAgICAgIHNoaXBQb2ludGVyOiBudWxsLFxuICAgICAgICBzaG90QXQ6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGNvbnN0IHBsYWNlU2hpcCA9IChzaGlwLCB4LCB5LCBkaXJlY3Rpb24pID0+IHtcbiAgICBpZiAoZGlyZWN0aW9uID09PSBcImhvcml6b250YWxcIikge1xuICAgICAgaWYgKHggPCAwIHx8IHggPiA5IHx8IHkgPCAwIHx8IHkgPiA5KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICh4ICsgc2hpcC5sZW5ndGggPiAxMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGJvYXJkW3ggKyBpXVt5XS5zaGlwU3BhY2UpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICBib2FyZFt4ICsgaV1beV0uc2hpcFNwYWNlID0gdHJ1ZTtcbiAgICAgICAgYm9hcmRbeCArIGldW3ldLnNoaXBQb2ludGVyID0gc2hpcDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gXCJ2ZXJ0aWNhbFwiKSB7XG4gICAgICBpZiAoeCA8IDAgfHwgeCA+IDkgfHwgeSA8IDAgfHwgeSA+IDkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHkgKyBzaGlwLmxlbmd0aCA+IDEwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYm9hcmRbeF1beSArIGldLnNoaXBTcGFjZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJvYXJkW3hdW3kgKyBpXS5zaGlwU3BhY2UgPSB0cnVlO1xuICAgICAgICBib2FyZFt4XVt5ICsgaV0uc2hpcFBvaW50ZXIgPSBzaGlwO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9ICh4LCB5KSA9PiB7XG4gICAgaWYgKHggPCAwIHx8IHggPiA5IHx8IHkgPCAwIHx8IHkgPiA5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChib2FyZFt4XVt5XS5zaG90QXQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgYm9hcmRbeF1beV0uc2hvdEF0ID0gdHJ1ZTtcbiAgICBpZiAoYm9hcmRbeF1beV0uc2hpcFNwYWNlKSB7XG4gICAgICBib2FyZFt4XVt5XS5zaGlwUG9pbnRlci5oaXQoKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGFsbFN1bmsgPSAoKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2FyZC5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBib2FyZFtpXS5sZW5ndGg7IGorKykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgYm9hcmRbaV1bal0uc2hpcFNwYWNlICYmXG4gICAgICAgICAgYm9hcmRbaV1bal0uc2hpcFBvaW50ZXIuaXNTdW5rKCkgPT09IGZhbHNlXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbiAgcmV0dXJuIHsgYm9hcmQsIHBsYWNlU2hpcCwgcmVjZWl2ZUF0dGFjaywgYWxsU3VuayB9O1xufTtcblxuY29uc3QgUGxheWVyID0gKCkgPT4ge1xuICBjb25zdCBuYW1lID0gXCJQbGF5ZXJcIjtcbiAgY29uc3QgYm9hcmQgPSBHYW1lYm9hcmQoKTtcbiAgY29uc3Qgc2hpcHMgPSBbU2hpcCg1KSwgU2hpcCg0KSwgU2hpcCgzKSwgU2hpcCgzKSwgU2hpcCgyKV07XG4gIGNvbnN0IGdldFJhbmRvbUNvb3JkaW5hdGVzID0gKCkgPT4ge1xuICAgIGNvbnN0IHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgY29uc3QgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICByZXR1cm4gW3gsIHldO1xuICB9O1xuICBjb25zdCBnZXRSYW5kb21EaXJlY3Rpb24gPSAoKSA9PiB7XG4gICAgY29uc3QgZGlyZWN0aW9ucyA9IFtcImhvcml6b250YWxcIiwgXCJ2ZXJ0aWNhbFwiXTtcbiAgICBjb25zdCBkaXJlY3Rpb24gPSBkaXJlY3Rpb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpXTtcbiAgICByZXR1cm4gZGlyZWN0aW9uO1xuICB9O1xuICBjb25zdCByYW5kb21QbGFjZVNoaXBzID0gKCkgPT4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBjb29yZGluYXRlcyA9IGdldFJhbmRvbUNvb3JkaW5hdGVzKCk7XG4gICAgICBsZXQgeCA9IGNvb3JkaW5hdGVzWzBdO1xuICAgICAgbGV0IHkgPSBjb29yZGluYXRlc1sxXTtcbiAgICAgIGxldCBkaXJlY3Rpb24gPSBnZXRSYW5kb21EaXJlY3Rpb24oKTtcbiAgICAgIGlmIChib2FyZC5wbGFjZVNoaXAoc2hpcHNbaV0sIHgsIHksIGRpcmVjdGlvbikgPT09IGZhbHNlKSB7XG4gICAgICAgIGktLTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHJldHVybiB7IG5hbWUsIGJvYXJkLCBzaGlwcywgcmFuZG9tUGxhY2VTaGlwcywgZ2V0UmFuZG9tQ29vcmRpbmF0ZXMgfTtcbn07XG5cbmNvbnN0IENvbXB1dGVyID0gKCkgPT4ge1xuICBjb25zdCBuYW1lID0gXCJDb21wdXRlclwiO1xuICBjb25zdCBib2FyZCA9IEdhbWVib2FyZCgpO1xuICBjb25zdCBzaGlwcyA9IFtTaGlwKDUpLCBTaGlwKDQpLCBTaGlwKDMpLCBTaGlwKDMpLCBTaGlwKDIpXTtcbiAgY29uc3QgZ2V0UmFuZG9tQ29vcmRpbmF0ZXMgPSAoKSA9PiB7XG4gICAgY29uc3QgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgIHJldHVybiBbeCwgeV07XG4gIH07XG4gIGNvbnN0IGdldFJhbmRvbURpcmVjdGlvbiA9ICgpID0+IHtcbiAgICBjb25zdCBkaXJlY3Rpb25zID0gW1wiaG9yaXpvbnRhbFwiLCBcInZlcnRpY2FsXCJdO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IGRpcmVjdGlvbnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMildO1xuICAgIHJldHVybiBkaXJlY3Rpb247XG4gIH07XG4gIGNvbnN0IHJhbmRvbVBsYWNlU2hpcHMgPSAoKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGNvb3JkaW5hdGVzID0gZ2V0UmFuZG9tQ29vcmRpbmF0ZXMoKTtcbiAgICAgIGxldCB4ID0gY29vcmRpbmF0ZXNbMF07XG4gICAgICBsZXQgeSA9IGNvb3JkaW5hdGVzWzFdO1xuICAgICAgbGV0IGRpcmVjdGlvbiA9IGdldFJhbmRvbURpcmVjdGlvbigpO1xuICAgICAgaWYgKGJvYXJkLnBsYWNlU2hpcChzaGlwc1tpXSwgeCwgeSwgZGlyZWN0aW9uKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgaS0tO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHsgbmFtZSwgYm9hcmQsIHNoaXBzLCByYW5kb21QbGFjZVNoaXBzLCBnZXRSYW5kb21Db29yZGluYXRlcyB9O1xufTtcblxuY29uc3QgR2FtZUNvbnRyb2xsZXIgPSAoKSA9PiB7XG4gIGNvbnN0IHBsYXllciA9IFBsYXllcigpO1xuICBwbGF5ZXIucmFuZG9tUGxhY2VTaGlwcygpO1xuICBjb25zdCBjb21wdXRlciA9IENvbXB1dGVyKCk7XG4gIGNvbXB1dGVyLnJhbmRvbVBsYWNlU2hpcHMoKTtcbiAgbGV0IHR1cm5jb3VudGVyID0gMDtcbiAgd2hpbGUgKFxuICAgIHBsYXllci5ib2FyZC5hbGxTdW5rKCkgPT09IGZhbHNlICYmXG4gICAgY29tcHV0ZXIuYm9hcmQuYWxsU3VuaygpID09PSBmYWxzZVxuICApIHtcbiAgICBjb25zb2xlLmxvZyhcIlR1cm4gXCIgKyB0dXJuY291bnRlcik7XG4gICAgaWYgKHR1cm5jb3VudGVyICUgMiA9PT0gMCkge1xuICAgICAgbGV0IGNvb3JkaW5hdGVzID0gY29tcHV0ZXIuZ2V0UmFuZG9tQ29vcmRpbmF0ZXMoKTtcbiAgICAgIGxldCB4ID0gY29vcmRpbmF0ZXNbMF07XG4gICAgICBsZXQgeSA9IGNvb3JkaW5hdGVzWzFdO1xuICAgICAgaWYgKHBsYXllci5ib2FyZC5yZWNlaXZlQXR0YWNrKHgsIHkpID09PSBmYWxzZSkge1xuICAgICAgICB0dXJuY291bnRlci0tO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgY29vcmRpbmF0ZXMgPSBwbGF5ZXIuZ2V0UmFuZG9tQ29vcmRpbmF0ZXMoKTtcbiAgICAgIGxldCB4ID0gY29vcmRpbmF0ZXNbMF07XG4gICAgICBsZXQgeSA9IGNvb3JkaW5hdGVzWzFdO1xuICAgICAgaWYgKGNvbXB1dGVyLmJvYXJkLnJlY2VpdmVBdHRhY2soeCwgeSkgPT09IGZhbHNlKSB7XG4gICAgICAgIHR1cm5jb3VudGVyLS07XG4gICAgICB9XG4gICAgfVxuICAgIHR1cm5jb3VudGVyKys7XG4gIH1cbiAgaWYgKHBsYXllci5ib2FyZC5hbGxTdW5rKCkpIHtcbiAgICBjb25zb2xlLmxvZyhcIkNvbXB1dGVyIHdpbnMgaW4gXCIgKyB0dXJuY291bnRlciArIFwiIHR1cm5zIVwiKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyhcIlBsYXllciB3aW5zIGluIFwiICsgdHVybmNvdW50ZXIgKyBcIiB0dXJuc1wiKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IFNoaXAsIEdhbWVib2FyZCwgUGxheWVyLCBDb21wdXRlciwgR2FtZUNvbnRyb2xsZXIgfTtcbiJdLCJuYW1lcyI6WyJTaGlwIiwibGVuIiwibGVuZ3RoIiwiaGl0cyIsImhpdCIsImlzU3VuayIsIkdhbWVib2FyZCIsImJvYXJkIiwiaSIsInB1c2giLCJqIiwic2hpcFNwYWNlIiwic2hpcFBvaW50ZXIiLCJzaG90QXQiLCJwbGFjZVNoaXAiLCJzaGlwIiwieCIsInkiLCJkaXJlY3Rpb24iLCJyZWNlaXZlQXR0YWNrIiwiYWxsU3VuayIsIlBsYXllciIsIm5hbWUiLCJzaGlwcyIsImdldFJhbmRvbUNvb3JkaW5hdGVzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZ2V0UmFuZG9tRGlyZWN0aW9uIiwiZGlyZWN0aW9ucyIsInJhbmRvbVBsYWNlU2hpcHMiLCJjb29yZGluYXRlcyIsIkNvbXB1dGVyIiwiR2FtZUNvbnRyb2xsZXIiLCJwbGF5ZXIiLCJjb21wdXRlciIsInR1cm5jb3VudGVyIiwiY29uc29sZSIsImxvZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9