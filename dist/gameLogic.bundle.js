(self["webpackChunkodin_battleship"] = self["webpackChunkodin_battleship"] || []).push([["gameLogic"],{

/***/ "./src/gameLogic.js":
/*!**************************!*\
  !*** ./src/gameLogic.js ***!
  \**************************/
/***/ ((module) => {

const Ship = len => {
  const length = len;
  let hits = 0;
  const hit = () => {
    hits++;
  };
  const isSunk = () => {
    return hits === length;
  };
  return {
    length,
    hit,
    isSunk
  };
};
const Gameboard = () => {
  const board = [];
  for (let i = 0; i < 10; i++) {
    board.push([]);
    for (let j = 0; j < 10; j++) {
      board[i].push({
        shipSpace: false,
        shipPointer: null,
        shotAt: false
      });
    }
  }
  const placeShip = (ship, x, y, direction) => {
    if (direction === "horizontal") {
      if (x < 0 || x > 9 || y < 0 || y > 9) {
        return false;
      }
      if (x + ship.length > 10) {
        return false;
      }
      for (let i = 0; i < ship.length; i++) {
        if (board[x + i][y].shipSpace) {
          return false;
        }
      }
      for (let i = 0; i < ship.length; i++) {
        board[x + i][y].shipSpace = true;
        board[x + i][y].shipPointer = ship;
      }
    } else if (direction === "vertical") {
      if (x < 0 || x > 9 || y < 0 || y > 9) {
        return false;
      }
      if (y + ship.length > 10) {
        return false;
      }
      for (let i = 0; i < ship.length; i++) {
        if (board[x][y + i].shipSpace) {
          return false;
        }
      }
      for (let i = 0; i < ship.length; i++) {
        board[x][y + i].shipSpace = true;
        board[x][y + i].shipPointer = ship;
      }
    }
  };
  const receiveAttack = (x, y) => {
    if (x < 0 || x > 9 || y < 0 || y > 9) {
      return false;
    }
    if (board[x][y].shotAt) {
      return false;
    }
    board[x][y].shotAt = true;
    if (board[x][y].shipSpace) {
      board[x][y].shipPointer.hit();
    }
  };
  const allSunk = () => {
    for (let i = 0; i < board.length; i++) {
      for (let j = 0; j < board[i].length; j++) {
        if (board[i][j].shipSpace && board[i][j].shipPointer.isSunk() === false) {
          return false;
        } else {
          continue;
        }
      }
    }
    return true;
  };
  return {
    board,
    placeShip,
    receiveAttack,
    allSunk
  };
};
const Player = () => {
  const name = "Player";
  const board = Gameboard();
  const ships = [Ship(5), Ship(4), Ship(3), Ship(3), Ship(2)];
  const getRandomCoordinates = () => {
    const x = Math.floor(Math.random() * 10);
    const y = Math.floor(Math.random() * 10);
    return [x, y];
  };
  const getRandomDirection = () => {
    const directions = ["horizontal", "vertical"];
    const direction = directions[Math.floor(Math.random() * 2)];
    return direction;
  };
  const randomPlaceShips = () => {
    for (let i = 0; i < ships.length; i++) {
      let coordinates = getRandomCoordinates();
      let x = coordinates[0];
      let y = coordinates[1];
      let direction = getRandomDirection();
      if (board.placeShip(ships[i], x, y, direction) === false) {
        i--;
      }
    }
  };
  return {
    name,
    board,
    ships,
    randomPlaceShips,
    getRandomCoordinates
  };
};
const Computer = () => {
  const name = "Computer";
  const board = Gameboard();
  const ships = [Ship(5), Ship(4), Ship(3), Ship(3), Ship(2)];
  const getRandomCoordinates = () => {
    const x = Math.floor(Math.random() * 10);
    const y = Math.floor(Math.random() * 10);
    return [x, y];
  };
  const getRandomDirection = () => {
    const directions = ["horizontal", "vertical"];
    const direction = directions[Math.floor(Math.random() * 2)];
    return direction;
  };
  const randomPlaceShips = () => {
    for (let i = 0; i < ships.length; i++) {
      let coordinates = getRandomCoordinates();
      let x = coordinates[0];
      let y = coordinates[1];
      let direction = getRandomDirection();
      if (board.placeShip(ships[i], x, y, direction) === false) {
        i--;
      }
    }
  };
  return {
    name,
    board,
    ships,
    randomPlaceShips,
    getRandomCoordinates
  };
};
const GameController = () => {
  const player = Player();
  player.randomPlaceShips();
  console.log(player.board.board);
  const computer = Computer();
  computer.randomPlaceShips();
  console.log(computer.board.board);
  let turncounter = 0;
  while (player.board.allSunk() === false && computer.board.allSunk() === false) {
    console.log("Turn " + turncounter);
    if (turncounter % 2 === 0) {
      let coordinates = computer.getRandomCoordinates();
      let x = coordinates[0];
      let y = coordinates[1];
      if (player.board.receiveAttack(x, y) === false) {
        turncounter--;
      }
    } else {
      let coordinates = player.getRandomCoordinates();
      let x = coordinates[0];
      let y = coordinates[1];
      if (computer.board.receiveAttack(x, y) === false) {
        turncounter--;
      }
    }
    turncounter++;
  }
  if (player.board.allSunk()) {
    console.log("Computer wins in " + turncounter + " turns!");
  } else {
    console.log("Player wins in " + turncounter + " turns");
  }
};
module.exports = {
  Ship,
  Gameboard,
  Player,
  Computer,
  GameController
};

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ var __webpack_exports__ = (__webpack_exec__("./src/gameLogic.js"));
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WSxhQUFhLENBQUNILENBQUMsRUFBRUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxFQUFFO1FBQzlDcUIsV0FBVyxFQUFFO01BQ2Y7SUFDRixDQUFDLE1BQU07TUFDTCxJQUFJUCxXQUFXLEdBQUdHLE1BQU0sQ0FBQ1Ysb0JBQW9CLENBQUMsQ0FBQztNQUMvQyxJQUFJUixDQUFDLEdBQUdlLFdBQVcsQ0FBQyxDQUFDLENBQUM7TUFDdEIsSUFBSWQsQ0FBQyxHQUFHYyxXQUFXLENBQUMsQ0FBQyxDQUFDO01BQ3RCLElBQUlNLFFBQVEsQ0FBQzlCLEtBQUssQ0FBQ1ksYUFBYSxDQUFDSCxDQUFDLEVBQUVDLENBQUMsQ0FBQyxLQUFLLEtBQUssRUFBRTtRQUNoRHFCLFdBQVcsRUFBRTtNQUNmO0lBQ0Y7SUFDQUEsV0FBVyxFQUFFO0VBQ2Y7RUFDQSxJQUFJSixNQUFNLENBQUMzQixLQUFLLENBQUNhLE9BQU8sQ0FBQyxDQUFDLEVBQUU7SUFDMUJlLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG1CQUFtQixHQUFHRSxXQUFXLEdBQUcsU0FBUyxDQUFDO0VBQzVELENBQUMsTUFBTTtJQUNMSCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxpQkFBaUIsR0FBR0UsV0FBVyxHQUFHLFFBQVEsQ0FBQztFQUN6RDtBQUNGLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFBRXhDLElBQUk7RUFBRU0sU0FBUztFQUFFZSxNQUFNO0VBQUVXLFFBQVE7RUFBRUM7QUFBZSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2dhbWVMb2dpYy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTaGlwID0gKGxlbikgPT4ge1xuICBjb25zdCBsZW5ndGggPSBsZW47XG4gIGxldCBoaXRzID0gMDtcbiAgY29uc3QgaGl0ID0gKCkgPT4ge1xuICAgIGhpdHMrKztcbiAgfTtcbiAgY29uc3QgaXNTdW5rID0gKCkgPT4ge1xuICAgIHJldHVybiBoaXRzID09PSBsZW5ndGg7XG4gIH07XG4gIHJldHVybiB7IGxlbmd0aCwgaGl0LCBpc1N1bmsgfTtcbn07XG5cbmNvbnN0IEdhbWVib2FyZCA9ICgpID0+IHtcbiAgY29uc3QgYm9hcmQgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgYm9hcmQucHVzaChbXSk7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKSB7XG4gICAgICBib2FyZFtpXS5wdXNoKHtcbiAgICAgICAgc2hpcFNwYWNlOiBmYWxzZSxcbiAgICAgICAgc2hpcFBvaW50ZXI6IG51bGwsXG4gICAgICAgIHNob3RBdDogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgY29uc3QgcGxhY2VTaGlwID0gKHNoaXAsIHgsIHksIGRpcmVjdGlvbikgPT4ge1xuICAgIGlmIChkaXJlY3Rpb24gPT09IFwiaG9yaXpvbnRhbFwiKSB7XG4gICAgICBpZiAoeCA8IDAgfHwgeCA+IDkgfHwgeSA8IDAgfHwgeSA+IDkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHggKyBzaGlwLmxlbmd0aCA+IDEwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYm9hcmRbeCArIGldW3ldLnNoaXBTcGFjZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJvYXJkW3ggKyBpXVt5XS5zaGlwU3BhY2UgPSB0cnVlO1xuICAgICAgICBib2FyZFt4ICsgaV1beV0uc2hpcFBvaW50ZXIgPSBzaGlwO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSBcInZlcnRpY2FsXCIpIHtcbiAgICAgIGlmICh4IDwgMCB8fCB4ID4gOSB8fCB5IDwgMCB8fCB5ID4gOSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoeSArIHNoaXAubGVuZ3RoID4gMTApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChib2FyZFt4XVt5ICsgaV0uc2hpcFNwYWNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYm9hcmRbeF1beSArIGldLnNoaXBTcGFjZSA9IHRydWU7XG4gICAgICAgIGJvYXJkW3hdW3kgKyBpXS5zaGlwUG9pbnRlciA9IHNoaXA7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCByZWNlaXZlQXR0YWNrID0gKHgsIHkpID0+IHtcbiAgICBpZiAoeCA8IDAgfHwgeCA+IDkgfHwgeSA8IDAgfHwgeSA+IDkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGJvYXJkW3hdW3ldLnNob3RBdCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBib2FyZFt4XVt5XS5zaG90QXQgPSB0cnVlO1xuICAgIGlmIChib2FyZFt4XVt5XS5zaGlwU3BhY2UpIHtcbiAgICAgIGJvYXJkW3hdW3ldLnNoaXBQb2ludGVyLmhpdCgpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgYWxsU3VuayA9ICgpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvYXJkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvYXJkW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBib2FyZFtpXVtqXS5zaGlwU3BhY2UgJiZcbiAgICAgICAgICBib2FyZFtpXVtqXS5zaGlwUG9pbnRlci5pc1N1bmsoKSA9PT0gZmFsc2VcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuICByZXR1cm4geyBib2FyZCwgcGxhY2VTaGlwLCByZWNlaXZlQXR0YWNrLCBhbGxTdW5rIH07XG59O1xuXG5jb25zdCBQbGF5ZXIgPSAoKSA9PiB7XG4gIGNvbnN0IG5hbWUgPSBcIlBsYXllclwiO1xuICBjb25zdCBib2FyZCA9IEdhbWVib2FyZCgpO1xuICBjb25zdCBzaGlwcyA9IFtTaGlwKDUpLCBTaGlwKDQpLCBTaGlwKDMpLCBTaGlwKDMpLCBTaGlwKDIpXTtcbiAgY29uc3QgZ2V0UmFuZG9tQ29vcmRpbmF0ZXMgPSAoKSA9PiB7XG4gICAgY29uc3QgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgIHJldHVybiBbeCwgeV07XG4gIH07XG4gIGNvbnN0IGdldFJhbmRvbURpcmVjdGlvbiA9ICgpID0+IHtcbiAgICBjb25zdCBkaXJlY3Rpb25zID0gW1wiaG9yaXpvbnRhbFwiLCBcInZlcnRpY2FsXCJdO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IGRpcmVjdGlvbnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMildO1xuICAgIHJldHVybiBkaXJlY3Rpb247XG4gIH07XG4gIGNvbnN0IHJhbmRvbVBsYWNlU2hpcHMgPSAoKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGNvb3JkaW5hdGVzID0gZ2V0UmFuZG9tQ29vcmRpbmF0ZXMoKTtcbiAgICAgIGxldCB4ID0gY29vcmRpbmF0ZXNbMF07XG4gICAgICBsZXQgeSA9IGNvb3JkaW5hdGVzWzFdO1xuICAgICAgbGV0IGRpcmVjdGlvbiA9IGdldFJhbmRvbURpcmVjdGlvbigpO1xuICAgICAgaWYgKGJvYXJkLnBsYWNlU2hpcChzaGlwc1tpXSwgeCwgeSwgZGlyZWN0aW9uKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgaS0tO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHsgbmFtZSwgYm9hcmQsIHNoaXBzLCByYW5kb21QbGFjZVNoaXBzLCBnZXRSYW5kb21Db29yZGluYXRlcyB9O1xufTtcblxuY29uc3QgQ29tcHV0ZXIgPSAoKSA9PiB7XG4gIGNvbnN0IG5hbWUgPSBcIkNvbXB1dGVyXCI7XG4gIGNvbnN0IGJvYXJkID0gR2FtZWJvYXJkKCk7XG4gIGNvbnN0IHNoaXBzID0gW1NoaXAoNSksIFNoaXAoNCksIFNoaXAoMyksIFNoaXAoMyksIFNoaXAoMildO1xuICBjb25zdCBnZXRSYW5kb21Db29yZGluYXRlcyA9ICgpID0+IHtcbiAgICBjb25zdCB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgcmV0dXJuIFt4LCB5XTtcbiAgfTtcbiAgY29uc3QgZ2V0UmFuZG9tRGlyZWN0aW9uID0gKCkgPT4ge1xuICAgIGNvbnN0IGRpcmVjdGlvbnMgPSBbXCJob3Jpem9udGFsXCIsIFwidmVydGljYWxcIl07XG4gICAgY29uc3QgZGlyZWN0aW9uID0gZGlyZWN0aW9uc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKV07XG4gICAgcmV0dXJuIGRpcmVjdGlvbjtcbiAgfTtcbiAgY29uc3QgcmFuZG9tUGxhY2VTaGlwcyA9ICgpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgY29vcmRpbmF0ZXMgPSBnZXRSYW5kb21Db29yZGluYXRlcygpO1xuICAgICAgbGV0IHggPSBjb29yZGluYXRlc1swXTtcbiAgICAgIGxldCB5ID0gY29vcmRpbmF0ZXNbMV07XG4gICAgICBsZXQgZGlyZWN0aW9uID0gZ2V0UmFuZG9tRGlyZWN0aW9uKCk7XG4gICAgICBpZiAoYm9hcmQucGxhY2VTaGlwKHNoaXBzW2ldLCB4LCB5LCBkaXJlY3Rpb24pID09PSBmYWxzZSkge1xuICAgICAgICBpLS07XG4gICAgICB9XG4gICAgfVxuICB9O1xuICByZXR1cm4geyBuYW1lLCBib2FyZCwgc2hpcHMsIHJhbmRvbVBsYWNlU2hpcHMsIGdldFJhbmRvbUNvb3JkaW5hdGVzIH07XG59O1xuXG5jb25zdCBHYW1lQ29udHJvbGxlciA9ICgpID0+IHtcbiAgY29uc3QgcGxheWVyID0gUGxheWVyKCk7XG4gIHBsYXllci5yYW5kb21QbGFjZVNoaXBzKCk7XG4gIGNvbnNvbGUubG9nKHBsYXllci5ib2FyZC5ib2FyZCk7XG4gIGNvbnN0IGNvbXB1dGVyID0gQ29tcHV0ZXIoKTtcbiAgY29tcHV0ZXIucmFuZG9tUGxhY2VTaGlwcygpO1xuICBjb25zb2xlLmxvZyhjb21wdXRlci5ib2FyZC5ib2FyZCk7XG4gIGxldCB0dXJuY291bnRlciA9IDA7XG4gIHdoaWxlIChcbiAgICBwbGF5ZXIuYm9hcmQuYWxsU3VuaygpID09PSBmYWxzZSAmJlxuICAgIGNvbXB1dGVyLmJvYXJkLmFsbFN1bmsoKSA9PT0gZmFsc2VcbiAgKSB7XG4gICAgY29uc29sZS5sb2coXCJUdXJuIFwiICsgdHVybmNvdW50ZXIpO1xuICAgIGlmICh0dXJuY291bnRlciAlIDIgPT09IDApIHtcbiAgICAgIGxldCBjb29yZGluYXRlcyA9IGNvbXB1dGVyLmdldFJhbmRvbUNvb3JkaW5hdGVzKCk7XG4gICAgICBsZXQgeCA9IGNvb3JkaW5hdGVzWzBdO1xuICAgICAgbGV0IHkgPSBjb29yZGluYXRlc1sxXTtcbiAgICAgIGlmIChwbGF5ZXIuYm9hcmQucmVjZWl2ZUF0dGFjayh4LCB5KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgdHVybmNvdW50ZXItLTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGNvb3JkaW5hdGVzID0gcGxheWVyLmdldFJhbmRvbUNvb3JkaW5hdGVzKCk7XG4gICAgICBsZXQgeCA9IGNvb3JkaW5hdGVzWzBdO1xuICAgICAgbGV0IHkgPSBjb29yZGluYXRlc1sxXTtcbiAgICAgIGlmIChjb21wdXRlci5ib2FyZC5yZWNlaXZlQXR0YWNrKHgsIHkpID09PSBmYWxzZSkge1xuICAgICAgICB0dXJuY291bnRlci0tO1xuICAgICAgfVxuICAgIH1cbiAgICB0dXJuY291bnRlcisrO1xuICB9XG4gIGlmIChwbGF5ZXIuYm9hcmQuYWxsU3VuaygpKSB7XG4gICAgY29uc29sZS5sb2coXCJDb21wdXRlciB3aW5zIGluIFwiICsgdHVybmNvdW50ZXIgKyBcIiB0dXJucyFcIik7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coXCJQbGF5ZXIgd2lucyBpbiBcIiArIHR1cm5jb3VudGVyICsgXCIgdHVybnNcIik7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0geyBTaGlwLCBHYW1lYm9hcmQsIFBsYXllciwgQ29tcHV0ZXIsIEdhbWVDb250cm9sbGVyIH07XG4iXSwibmFtZXMiOlsiU2hpcCIsImxlbiIsImxlbmd0aCIsImhpdHMiLCJoaXQiLCJpc1N1bmsiLCJHYW1lYm9hcmQiLCJib2FyZCIsImkiLCJwdXNoIiwiaiIsInNoaXBTcGFjZSIsInNoaXBQb2ludGVyIiwic2hvdEF0IiwicGxhY2VTaGlwIiwic2hpcCIsIngiLCJ5IiwiZGlyZWN0aW9uIiwicmVjZWl2ZUF0dGFjayIsImFsbFN1bmsiLCJQbGF5ZXIiLCJuYW1lIiwic2hpcHMiLCJnZXRSYW5kb21Db29yZGluYXRlcyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImdldFJhbmRvbURpcmVjdGlvbiIsImRpcmVjdGlvbnMiLCJyYW5kb21QbGFjZVNoaXBzIiwiY29vcmRpbmF0ZXMiLCJDb21wdXRlciIsIkdhbWVDb250cm9sbGVyIiwicGxheWVyIiwiY29uc29sZSIsImxvZyIsImNvbXB1dGVyIiwidHVybmNvdW50ZXIiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==